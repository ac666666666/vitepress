# ä¸‰æ•°ä¹‹å’Œ

[LeetCode å®˜æ–¹é¢˜ç›®é“¾æ¥](https://leetcode.cn/problems/3sum/)

## 1. é¢˜ç›®å‘ˆç°

**éš¾åº¦ç­‰çº§**ï¼šğŸŸ¡ ä¸­ç­‰  
**æ ¸å¿ƒè€ƒå¯Ÿç‚¹**ï¼šæ•°ç»„ã€åŒæŒ‡é’ˆã€æ’åº

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ `[nums[i], nums[j], nums[k]]` æ»¡è¶³ `i != j`ã€`i != k` ä¸” `j != k` ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ `nums[i] + nums[j] + nums[k] == 0` ã€‚è¯·ä½ è¿”å›æ‰€æœ‰å’Œä¸º 0 ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚

**æ³¨æ„**ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚

> **ç¤ºä¾‹ 1ï¼š**
>
> **è¾“å…¥**ï¼šnums = [-1,0,1,2,-1,-4]  
> **è¾“å‡º**ï¼š[[-1,-1,2],[-1,0,1]]  
> **è§£é‡Š**ï¼š  
> nums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0 ã€‚  
> nums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0 ã€‚  
> nums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0 ã€‚  
> ä¸åŒçš„ä¸‰å…ƒç»„æ˜¯ [-1,0,1] å’Œ [-1,-1,2] ã€‚  
> æ³¨æ„ï¼Œè¾“å‡ºçš„é¡ºåºå’Œä¸‰å…ƒç»„çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚

> **ç¤ºä¾‹ 2ï¼š**
>
> **è¾“å…¥**ï¼šnums = [0,1,1]  
> **è¾“å‡º**ï¼š[]  
> **è§£é‡Š**ï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸ä¸º 0 ã€‚

> **ç¤ºä¾‹ 3ï¼š**
>
> **è¾“å…¥**ï¼šnums = [0,0,0]  
> **è¾“å‡º**ï¼š[[0,0,0]]  
> **è§£é‡Š**ï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸º 0 ã€‚

---

## 2. è§£é¢˜æ€è·¯æ‹†è§£

### æ–¹æ³•ï¼šæ’åº + åŒæŒ‡é’ˆ

è¿™é“é¢˜å¦‚æœä½¿ç”¨ä¸‰é‡å¾ªç¯æš´åŠ›æ±‚è§£ï¼Œå¤æ‚åº¦ä¼šè¾¾åˆ° $O(n^3)$ï¼Œè‚¯å®šä¼šè¶…æ—¶ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨**æ’åº**æ¥é™ä½å¤æ‚åº¦ã€‚

1.  **æ’åº**ï¼šé¦–å…ˆå¯¹æ•°ç»„è¿›è¡Œå‡åºæ’åºã€‚æ’åºçš„å¥½å¤„æ˜¯æ–¹ä¾¿æˆ‘ä»¬ç§»åŠ¨æŒ‡é’ˆæ¥è°ƒæ•´å’Œçš„å¤§å°ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿**å»é‡**ã€‚
2.  **å›ºå®šä¸€ä¸ªæ•°**ï¼šéå†æ•°ç»„ï¼Œå›ºå®šç¬¬ä¸€ä¸ªæ•° `nums[i]`ã€‚
    *   å¦‚æœ `nums[i] > 0`ï¼Œå› ä¸ºæ•°ç»„å·²æ’åºï¼Œåé¢çš„æ•°è‚¯å®šä¹Ÿéƒ½å¤§äº 0ï¼Œä¸å¯èƒ½å‡‘å‡ºå’Œä¸º 0 çš„ä¸‰å…ƒç»„ï¼Œç›´æ¥ `break`ã€‚
    *   **å»é‡**ï¼šå¦‚æœ `i > 0` ä¸” `nums[i] == nums[i-1]`ï¼Œè¯´æ˜è¿™ä¸ªæ•°åˆšæ‰å·²ç»ä½œä¸ºç¬¬ä¸€ä¸ªæ•°å¤„ç†è¿‡äº†ï¼Œè·³è¿‡ä»¥é¿å…é‡å¤ã€‚
3.  **åŒæŒ‡é’ˆå¯»æ‰¾å¦å¤–ä¸¤ä¸ªæ•°**ï¼š
    *   è®¾å·¦æŒ‡é’ˆ `L = i + 1`ï¼Œå³æŒ‡é’ˆ `R = n - 1`ã€‚
    *   è®¡ç®— `sum = nums[i] + nums[L] + nums[R]`ã€‚
    *   **æƒ…å†µ 1**ï¼š`sum == 0`ã€‚æ‰¾åˆ°ä¸€ç»„è§£ï¼ŒåŠ å…¥ç»“æœé›†ã€‚
        *   **å»é‡**ï¼š`L` å‘å³ç§»åŠ¨ï¼Œè·³è¿‡æ‰€æœ‰é‡å¤çš„ `nums[L]`ã€‚
        *   **å»é‡**ï¼š`R` å‘å·¦ç§»åŠ¨ï¼Œè·³è¿‡æ‰€æœ‰é‡å¤çš„ `nums[R]`ã€‚
        *   `L` å’Œ `R` ç»§ç»­å‘ä¸­é—´ç§»åŠ¨ã€‚
    *   **æƒ…å†µ 2**ï¼š`sum < 0`ã€‚è¯´æ˜å’Œå¤ªå°äº†ï¼Œéœ€è¦è®©å’Œå˜å¤§ï¼Œæ‰€ä»¥ `L` å‘å³ç§»ã€‚
    *   **æƒ…å†µ 3**ï¼š`sum > 0`ã€‚è¯´æ˜å’Œå¤ªå¤§äº†ï¼Œéœ€è¦è®©å’Œå˜å°ï¼Œæ‰€ä»¥ `R` å‘å·¦ç§»ã€‚

è¿™ç§æ–¹æ³•å°†å¤æ‚åº¦é™ä½åˆ°äº† $O(n^2)$ã€‚

---

## 3. ä»£ç å®ç°

```javascript
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var threeSum = function(nums) {
    let ans = [];
    const len = nums.length;
    if (nums == null || len < 3) return ans;

    // 1. æ’åº
    nums.sort((a, b) => a - b);

    // 2. éå†ç¬¬ä¸€ä¸ªæ•°
    for (let i = 0; i < len; i++) {
        // å¦‚æœå½“å‰æ•°å­—å¤§äº0ï¼Œåˆ™ä¸‰æ•°ä¹‹å’Œä¸€å®šå¤§äº0ï¼Œç»“æŸå¾ªç¯
        if (nums[i] > 0) break;

        // å»é‡ï¼šå¦‚æœå½“å‰æ•°å­—å’Œå‰ä¸€ä¸ªä¸€æ ·ï¼Œè·³è¿‡
        if (i > 0 && nums[i] == nums[i - 1]) continue;

        let L = i + 1;
        let R = len - 1;

        while (L < R) {
            const sum = nums[i] + nums[L] + nums[R];
            if (sum == 0) {
                ans.push([nums[i], nums[L], nums[R]]);
                
                // å»é‡ï¼šè·³è¿‡é‡å¤çš„ L
                while (L < R && nums[L] == nums[L + 1]) L++;
                // å»é‡ï¼šè·³è¿‡é‡å¤çš„ R
                while (L < R && nums[R] == nums[R - 1]) R--;
                
                L++;
                R--;
            } else if (sum < 0) {
                // å’Œå¤ªå°ï¼ŒL å³ç§»
                L++;
            } else if (sum > 0) {
                // å’Œå¤ªå¤§ï¼ŒR å·¦ç§»
                R--;
            }
        }
    }
    return ans;
};
```

#### ä»£ç æ‰§è¡Œæ¼”ç¤º
è¾“å…¥ `nums = [-1, 0, 1, 2, -1, -4]`

1.  **æ’åº**ï¼š`[-4, -1, -1, 0, 1, 2]`
2.  **i=0, nums[i]=-4**ï¼š
    *   `L=-1 (idx 1)`, `R=2 (idx 5)`ã€‚Sum = -4 - 1 + 2 = -3 < 0ã€‚`L` å³ç§»ã€‚
    *   `L=-1 (idx 2)`, `R=2 (idx 5)`ã€‚Sum = -4 - 1 + 2 = -3 < 0ã€‚`L` å³ç§»ã€‚
    *   ... ç›´åˆ° L >= Rã€‚æ— è§£ã€‚
3.  **i=1, nums[i]=-1**ï¼š
    *   `L=-1 (idx 2)`, `R=2 (idx 5)`ã€‚Sum = -1 - 1 + 2 = 0ã€‚**æ‰¾åˆ°è§£ `[-1, -1, 2]`**ã€‚
        *   `L` è·³è¿‡é‡å¤å€¼ç§»è‡³ `0 (idx 3)`ã€‚`R` ç§»è‡³ `1 (idx 4)`ã€‚
    *   `L=0 (idx 3)`, `R=1 (idx 4)`ã€‚Sum = -1 + 0 + 1 = 0ã€‚**æ‰¾åˆ°è§£ `[-1, 0, 1]`**ã€‚
        *   L, R ç§»åŠ¨åç›¸é‡ï¼Œé€€å‡ºã€‚
4.  **i=2, nums[i]=-1**ï¼š
    *   å’Œå‰ä¸€ä¸ªæ•°é‡å¤ï¼Œ`continue` è·³è¿‡ã€‚
5.  **i=3, nums[i]=0**ï¼š
    *   `L=1`, `R=2`ã€‚Sum = 3 > 0ã€‚æ— è§£ã€‚
6.  **i=4, nums[i]=1**ï¼š
    *   `1 > 0`ï¼Œå¾ªç¯ç»“æŸã€‚

æœ€ç»ˆç»“æœï¼š`[[-1, -1, 2], [-1, 0, 1]]`ã€‚

---

## 4. å¤æ‚åº¦åˆ†æ

| ç»´åº¦ | æè¿° |
| :--- | :--- |
| **æ—¶é—´å¤æ‚åº¦** | $O(n^2)$ã€‚æ’åºè€—æ—¶ $O(n \log n)$ï¼ŒåŒæŒ‡é’ˆéå†è€—æ—¶ $O(n^2)$ï¼Œæ€»ä½“ä¸º $O(n^2)$ã€‚ |
| **ç©ºé—´å¤æ‚åº¦** | $O(\log n)$ã€‚å–å†³äºæ’åºç®—æ³•çš„æ ˆç©ºé—´å¼€é”€ã€‚å¦‚æœä¸è€ƒè™‘ç»“æœæ•°ç»„ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ $O(1)$ æˆ– $O(\log n)$ã€‚ |
