# K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨

[LeetCode å®˜æ–¹é¢˜ç›®é“¾æ¥](https://leetcode.cn/problems/reverse-nodes-in-k-group/)

## 1. é¢˜ç›®å‘ˆç°

**éš¾åº¦ç­‰çº§**ï¼šğŸ”´ å›°éš¾  
**æ ¸å¿ƒè€ƒå¯Ÿç‚¹**ï¼šé“¾è¡¨ã€é€’å½’/è¿­ä»£ã€ç¿»è½¬ç®—æ³•

ç»™ä½ é“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ï¼Œæ¯ `k` ä¸ªèŠ‚ç‚¹ä¸€ç»„è¿›è¡Œç¿»è½¬ï¼Œè¯·ä½ è¿”å›ä¿®æ”¹åçš„é“¾è¡¨ã€‚

`k` æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºé“¾è¡¨çš„é•¿åº¦ã€‚å¦‚æœèŠ‚ç‚¹æ€»æ•°ä¸æ˜¯ `k` çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆè¯·å°†æœ€åå‰©ä½™çš„èŠ‚ç‚¹ä¿æŒåŸæœ‰é¡ºåºã€‚

ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚

> **ç¤ºä¾‹ 1ï¼š**
>
> **è¾“å…¥**ï¼šhead = [1,2,3,4,5], k = 2  
> **è¾“å‡º**ï¼š[2,1,4,3,5]

> **ç¤ºä¾‹ 2ï¼š**
>
> **è¾“å…¥**ï¼šhead = [1,2,3,4,5], k = 3  
> **è¾“å‡º**ï¼š[3,2,1,4,5]

---

## 2. è§£é¢˜æ€è·¯æ‹†è§£

è¿™é“é¢˜æ˜¯ "ä¸¤ä¸¤äº¤æ¢é“¾è¡¨èŠ‚ç‚¹" çš„è¿›é˜¶ç‰ˆï¼Œä¹Ÿæ˜¯ "åè½¬é“¾è¡¨" çš„åº”ç”¨ç‰ˆã€‚

### æ–¹æ³•ï¼šè¿­ä»£æ³•

æˆ‘ä»¬éœ€è¦ç»´æŠ¤å‡ ä¸ªæŒ‡é’ˆï¼š
1.  `pre`ï¼šå½“å‰è¦ç¿»è½¬çš„è¿™ä¸€ç»„èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚
2.  `end`ï¼šå½“å‰è¦ç¿»è½¬çš„è¿™ä¸€ç»„èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚
3.  `start`ï¼šå½“å‰è¦ç¿»è½¬çš„è¿™ä¸€ç»„èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚
4.  `next`ï¼šä¸‹ä¸€ç»„èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå³ `end.next`ï¼‰ã€‚

**æ­¥éª¤**ï¼š
1.  **åˆ†ç»„æ£€æµ‹**ï¼šä» `pre` å¼€å§‹ï¼Œå°è¯•å‘åèµ° `k` æ­¥æ‰¾åˆ° `end`ã€‚
    *   å¦‚æœè¿˜æ²¡èµ°å®Œ `k` æ­¥å°±é‡åˆ°äº† `null`ï¼Œè¯´æ˜å‰©ä½™èŠ‚ç‚¹ä¸è¶³ `k` ä¸ªï¼Œç›´æ¥ç»“æŸï¼Œä¸éœ€è¦ç¿»è½¬ã€‚
2.  **æ–­å¼€è¿æ¥**ï¼šè®°å½• `next = end.next`ï¼Œç„¶åæŠŠ `end.next = null`ï¼ˆä¸ºäº†è°ƒç”¨æ ‡å‡†çš„åè½¬å‡½æ•°ï¼‰ã€‚
3.  **å±€éƒ¨ç¿»è½¬**ï¼šè°ƒç”¨åè½¬é“¾è¡¨å‡½æ•° `reverse(start)`ï¼Œç¿»è½¬åè¿”å›æ–°çš„å¤´èŠ‚ç‚¹ï¼ˆå…¶å®å°±æ˜¯åŸæ¥çš„ `end`ï¼‰ã€‚
4.  **é‡æ–°è¿æ¥**ï¼š
    *   `pre.next` æŒ‡å‘ç¿»è½¬åçš„å¤´èŠ‚ç‚¹ã€‚
    *   `start` å˜æˆäº†è¿™ä¸€ç»„çš„å°¾èŠ‚ç‚¹ï¼Œæ‰€ä»¥ `start.next` è¿æ¥åˆ° `next`ã€‚
5.  **æ›´æ–°æŒ‡é’ˆ**ï¼š`pre` ç§»åŠ¨åˆ° `start`ï¼Œå‡†å¤‡å¤„ç†ä¸‹ä¸€ç»„ã€‚

---

## 3. ä»£ç å®ç°

```javascript
/**
 * Definition for singly-linked list.
 * function ListNode(val, next) {
 *     this.val = (val===undefined ? 0 : val)
 *     this.next = (next===undefined ? null : next)
 * }
 */

/**
 * @param {ListNode} head
 * @param {number} k
 * @return {ListNode}
 */
var reverseKGroup = function(head, k) {
    if (!head || k === 1) return head;

    const dummy = new ListNode(0);
    dummy.next = head;
    
    let pre = dummy;
    let end = dummy;

    while (end.next !== null) {
        // 1. æ‰¾åˆ°è¿™ä¸€ç»„çš„ç»“å°¾ end
        for (let i = 0; i < k && end !== null; i++) {
            end = end.next;
        }
        
        // å¦‚æœä¸è¶³ k ä¸ªï¼Œç›´æ¥ç»“æŸ
        if (end === null) break;

        // 2. è®°å½•ç›¸å…³èŠ‚ç‚¹
        let start = pre.next;
        let next = end.next;

        // 3. æ–­å¼€é“¾è¡¨ï¼Œæ–¹ä¾¿å±€éƒ¨ç¿»è½¬
        end.next = null;

        // 4. å±€éƒ¨ç¿»è½¬
        pre.next = reverse(start);

        // 5. é‡æ–°è¿æ¥
        start.next = next;

        // 6. æ›´æ–°æŒ‡é’ˆï¼Œå‡†å¤‡ä¸‹ä¸€è½®
        pre = start;
        end = pre;
    }

    return dummy.next;
};

// æ ‡å‡†çš„åè½¬é“¾è¡¨å‡½æ•°
function reverse(head) {
    let prev = null;
    let curr = head;
    while (curr !== null) {
        let next = curr.next;
        curr.next = prev;
        prev = curr;
        curr = next;
    }
    return prev;
}
```

#### ä»£ç æ‰§è¡Œæ¼”ç¤º
è¾“å…¥ `head = [1,2,3,4,5], k = 2`

*   `dummy` -> `1` -> `2` -> `3` -> `4` -> `5`
*   `pre` = `dummy`, `end` = `dummy`
*   **ç¬¬ 1 è½®**ï¼š
    *   `end` èµ° 2 æ­¥ï¼ŒæŒ‡å‘ `2`ã€‚
    *   `start` = `1`, `next` = `3`ã€‚
    *   æ–­å¼€ï¼š`2.next = null`ã€‚é“¾è¡¨ç‰‡æ®µ `1->2`ã€‚
    *   ç¿»è½¬ `1->2` å˜æˆ `2->1`ã€‚è¿”å› `2`ã€‚
    *   è¿æ¥ï¼š`pre.next` (dummy) -> `2`ã€‚`start.next` (1) -> `3`ã€‚
    *   é“¾è¡¨çŠ¶æ€ï¼š`dummy` -> `2` -> `1` -> `3` -> `4` -> `5`ã€‚
    *   æ›´æ–°ï¼š`pre` = `1`, `end` = `1`ã€‚
*   **ç¬¬ 2 è½®**ï¼š
    *   `end` (1) èµ° 2 æ­¥ï¼ŒæŒ‡å‘ `4`ã€‚
    *   `start` = `3`, `next` = `5`ã€‚
    *   æ–­å¼€ï¼š`4.next = null`ã€‚é“¾è¡¨ç‰‡æ®µ `3->4`ã€‚
    *   ç¿»è½¬ `3->4` å˜æˆ `4->3`ã€‚è¿”å› `4`ã€‚
    *   è¿æ¥ï¼š`pre.next` (1) -> `4`ã€‚`start.next` (3) -> `5`ã€‚
    *   é“¾è¡¨çŠ¶æ€ï¼š`dummy` -> `2` -> `1` -> `4` -> `3` -> `5`ã€‚
    *   æ›´æ–°ï¼š`pre` = `3`, `end` = `3`ã€‚
*   **ç¬¬ 3 è½®**ï¼š
    *   `end` (3) å°è¯•èµ° 2 æ­¥ã€‚èµ° 1 æ­¥åˆ° `5`ï¼Œå†èµ° 1 æ­¥ `null`ã€‚
    *   `end` å˜ä¸º `null`ï¼Œè·³å‡ºå¾ªç¯ã€‚
*   è¿”å› `dummy.next`ã€‚

---

## 4. å¤æ‚åº¦åˆ†æ

| ç»´åº¦ | æè¿° |
| :--- | :--- |
| **æ—¶é—´å¤æ‚åº¦** | $O(n)$ã€‚æ¯ä¸ªèŠ‚ç‚¹è¢«éå†çš„æ¬¡æ•°æ˜¯å¸¸æ•°çº§ï¼ˆå¯»æ‰¾ end 1æ¬¡ï¼Œç¿»è½¬ 1æ¬¡ï¼‰ã€‚ |
| **ç©ºé—´å¤æ‚åº¦** | $O(1)$ã€‚åªç”¨äº†å¸¸æ•°ä¸ªæŒ‡é’ˆå˜é‡ï¼Œæ²¡æœ‰ä½¿ç”¨é€’å½’æ ˆæˆ–é¢å¤–æ•°ç»„ã€‚ |
