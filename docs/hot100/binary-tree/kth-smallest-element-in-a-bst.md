# äºŒå‰æœç´¢æ ‘ä¸­ç¬¬Kå°çš„å…ƒç´ 

[LeetCode å®˜æ–¹é¢˜ç›®é“¾æ¥](https://leetcode.cn/problems/kth-smallest-element-in-a-bst/)

## 1. é¢˜ç›®å‘ˆç°

**éš¾åº¦ç­‰çº§**ï¼šğŸŸ¡ ä¸­ç­‰  
**æ ¸å¿ƒè€ƒå¯Ÿç‚¹**ï¼šäºŒå‰æœç´¢æ ‘ (BST)ã€ä¸­åºéå†

ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œå’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªç®—æ³•æŸ¥æ‰¾å…¶ä¸­ç¬¬ `k` å°çš„å…ƒç´ ï¼ˆä» 1 å¼€å§‹è®¡æ•°ï¼‰ã€‚

> **ç¤ºä¾‹ 1ï¼š**
>
> **è¾“å…¥**ï¼šroot = [3,1,4,null,2], k = 1  
> **è¾“å‡º**ï¼š1

> **ç¤ºä¾‹ 2ï¼š**
>
> **è¾“å…¥**ï¼šroot = [5,3,6,2,4,null,null,1], k = 3  
> **è¾“å‡º**ï¼š3

---

## 2. è§£é¢˜æ€è·¯æ‹†è§£

**æ ¸å¿ƒæ€§è´¨**ï¼šäºŒå‰æœç´¢æ ‘çš„ **ä¸­åºéå†** (Left -> Root -> Right) æ˜¯ä¸€ä¸ª **å‡åºåºåˆ—**ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬è¦æ‰¾ç¬¬ `k` å°çš„å…ƒç´ ï¼Œåªéœ€è¦å¯¹äºŒå‰æœç´¢æ ‘è¿›è¡Œä¸­åºéå†ï¼Œå¹¶è®¡æ•°ã€‚
*   è®¿é—®ç¬¬ 1 ä¸ªèŠ‚ç‚¹ï¼šç¬¬ 1 å°ã€‚
*   è®¿é—®ç¬¬ 2 ä¸ªèŠ‚ç‚¹ï¼šç¬¬ 2 å°ã€‚
*   ...
*   è®¿é—®ç¬¬ `k` ä¸ªèŠ‚ç‚¹ï¼šç¬¬ `k` å°ï¼Œç›´æ¥è¿”å›è¯¥èŠ‚ç‚¹çš„å€¼ã€‚

### æ–¹æ³•ä¸€ï¼šé€’å½’ä¸­åºéå†

æˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå…¨å±€è®¡æ•°å™¨ `count`ï¼Œæˆ–è€…åœ¨é€’å½’å‚æ•°ä¸­ä¼ é€’ã€‚
å½“ `count === k` æ—¶ï¼Œè®°å½•ç»“æœå¹¶åœæ­¢éå†ï¼ˆæˆ–è€…ç›´æ¥è¿”å›ï¼‰ã€‚

### æ–¹æ³•äºŒï¼šè¿­ä»£ä¸­åºéå† (æ ˆ)

ä½¿ç”¨æ ˆæ¨¡æ‹Ÿä¸­åºéå†ï¼Œæ§åˆ¶æµæ›´æ¸…æ™°ã€‚
1.  ä¸€è·¯å‘å·¦å…¥æ ˆã€‚
2.  å¼¹å‡ºèŠ‚ç‚¹ï¼Œè®¡æ•°å™¨ `k--`ã€‚
3.  å¦‚æœ `k === 0`ï¼Œè¿”å›å½“å‰èŠ‚ç‚¹å€¼ã€‚
4.  è½¬å‘å³å­æ ‘ã€‚

---

## 3. ä»£ç å®ç°

### è¿­ä»£æ³• (æ¨èï¼Œé€»è¾‘æ¸…æ™°)

```javascript
/**
 * Definition for a binary tree node.
 * function TreeNode(val, left, right) {
 *     this.val = (val===undefined ? 0 : val)
 *     this.left = (left===undefined ? null : left)
 *     this.right = (right===undefined ? null : right)
 * }
 */
/**
 * @param {TreeNode} root
 * @param {number} k
 * @return {number}
 */
var kthSmallest = function(root, k) {
    const stack = [];
    let curr = root;
    
    while (curr !== null || stack.length > 0) {
        // 1. ä¸€è·¯å‘å·¦
        while (curr !== null) {
            stack.push(curr);
            curr = curr.left;
        }
        
        // 2. å¼¹å‡ºèŠ‚ç‚¹
        curr = stack.pop();
        k--; // æ‰¾åˆ°ç¬¬ 1 å°ã€ç¬¬ 2 å°...
        
        // 3. æ£€æŸ¥æ˜¯å¦æ˜¯ç¬¬ k å°
        if (k === 0) {
            return curr.val;
        }
        
        // 4. è½¬å‘å³å­æ ‘
        curr = curr.right;
    }
    
    return -1; // ç†è®ºä¸Šä¸ä¼šèµ°åˆ°è¿™é‡Œ
};
```

### é€’å½’æ³•

```javascript
var kthSmallest = function(root, k) {
    let res = null;
    let count = 0;
    
    const inorder = (node) => {
        if (!node || res !== null) return; // å‰ªæï¼šå¦‚æœå·²ç»æ‰¾åˆ°äº†ï¼Œç›´æ¥è¿”å›
        
        inorder(node.left);
        
        count++;
        if (count === k) {
            res = node.val;
            return;
        }
        
        inorder(node.right);
    };
    
    inorder(root);
    return res;
};
```

#### ä»£ç æ‰§è¡Œæ¼”ç¤º (è¿­ä»£æ³•)
è¾“å…¥ `root = [5, 3, 6, 2, 4, null, null, 1]`, `k = 3`
ç»“æ„ï¼š
```
    5
   / \
  3   6
 / \
2   4
/
1
```

1.  Push 5, 3, 2, 1. Stack: `[5, 3, 2, 1]`.
2.  Pop 1. `k`=2. Right null.
3.  Pop 2. `k`=1. Right null.
4.  Pop 3. `k`=0. **Return 3**.

---

## 4. å¤æ‚åº¦åˆ†æ

| ç»´åº¦ | æè¿° |
| :--- | :--- |
| **æ—¶é—´å¤æ‚åº¦** | $O(H + k)$ã€‚$H$ æ˜¯æ ‘é«˜ã€‚æˆ‘ä»¬éœ€è¦å…ˆèµ°åˆ°æœ€å·¦ä¸‹çš„èŠ‚ç‚¹ï¼ˆ$O(H)$ï¼‰ï¼Œç„¶åéå† $k$ ä¸ªèŠ‚ç‚¹ã€‚ |
| **ç©ºé—´å¤æ‚åº¦** | $O(H)$ã€‚æ ˆçš„æ·±åº¦ã€‚ |
