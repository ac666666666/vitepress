# äºŒå‰æ ‘çš„ç›´å¾„

[LeetCode å®˜æ–¹é¢˜ç›®é“¾æ¥](https://leetcode.cn/problems/diameter-of-binary-tree/)

## 1. é¢˜ç›®å‘ˆç°

**éš¾åº¦ç­‰çº§**ï¼šğŸŸ¢ ç®€å•  
**æ ¸å¿ƒè€ƒå¯Ÿç‚¹**ï¼šäºŒå‰æ ‘ã€æ·±åº¦ä¼˜å…ˆæœç´¢ (DFS)ã€é€’å½’

ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¿”å›è¯¥æ ‘çš„ **ç›´å¾„** ã€‚

äºŒå‰æ ‘çš„ **ç›´å¾„** æ˜¯æŒ‡æ ‘ä¸­ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ€é•¿è·¯å¾„çš„ **é•¿åº¦** ã€‚è¿™æ¡è·¯å¾„å¯èƒ½ç»è¿‡ä¹Ÿå¯èƒ½ä¸ç»è¿‡æ ¹èŠ‚ç‚¹ã€‚

**æ³¨æ„**ï¼šä¸¤èŠ‚ç‚¹ä¹‹é—´çš„è·¯å¾„é•¿åº¦æ˜¯ä»¥å®ƒä»¬ä¹‹é—´è¾¹çš„æ•°ç›®è¡¨ç¤ºã€‚

> **ç¤ºä¾‹ 1ï¼š**
>
> **è¾“å…¥**ï¼šroot = [1,2,3,4,5]  
> **è¾“å‡º**ï¼š3  
> **è§£é‡Š**ï¼š3 ï¼Œå–è·¯å¾„ [4,2,1,3] æˆ– [5,2,1,3] çš„é•¿åº¦ã€‚
> ```
>     1
>    / \
>   2   3
>  / \
> 4   5
> ```

> **ç¤ºä¾‹ 2ï¼š**
>
> **è¾“å…¥**ï¼šroot = [1,2]  
> **è¾“å‡º**ï¼š1

---

## 2. è§£é¢˜æ€è·¯æ‹†è§£

**ç›´å¾„** çš„å®šä¹‰æ˜¯ä»»æ„ä¸¤ç‚¹é—´çš„æœ€é•¿è·¯å¾„ã€‚
å¯¹äºä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ `node`ï¼Œç»è¿‡å®ƒçš„æœ€é•¿è·¯å¾„é•¿åº¦ä¸ºï¼š`å·¦å­æ ‘çš„æœ€å¤§æ·±åº¦ + å³å­æ ‘çš„æœ€å¤§æ·±åº¦`ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥éå†æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®¡ç®—ç»è¿‡è¯¥èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ï¼Œå¹¶æ›´æ–°å…¨å±€æœ€å¤§å€¼ã€‚
ä¸ºäº†æ•ˆç‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è®¡ç®— **æ·±åº¦ (Height)** çš„è¿‡ç¨‹ä¸­é¡ºä¾¿è®¡ç®— **ç›´å¾„ (Diameter)**ã€‚

1.  **å®šä¹‰é€’å½’å‡½æ•° `depth(node)`**ï¼š
    *   è¿”å›ä»¥ `node` ä¸ºæ ¹çš„å­æ ‘çš„æœ€å¤§æ·±åº¦ï¼ˆèŠ‚ç‚¹æ•°ï¼‰ã€‚
    *   `depth = max(leftDepth, rightDepth) + 1`ã€‚

2.  **æ›´æ–°å…¨å±€æœ€å¤§ç›´å¾„ `maxDiameter`**ï¼š
    *   åœ¨ `depth` å‡½æ•°å†…éƒ¨ï¼Œæ¯æ¬¡ç®—å‡ºå·¦å³å­æ ‘æ·±åº¦åï¼Œè®¡ç®— `leftDepth + rightDepth`ã€‚
    *   `maxDiameter = max(maxDiameter, leftDepth + rightDepth)`ã€‚
    *   æ³¨æ„ï¼šæ·±åº¦é€šå¸¸æŒ‡èŠ‚ç‚¹æ•°ï¼ˆæˆ–è€…å±‚æ•°ï¼‰ï¼Œè€Œé¢˜ç›®ä¸­çš„è·¯å¾„é•¿åº¦æ˜¯è¾¹çš„æ•°é‡ã€‚
    *   å¦‚æœ `leftDepth` å’Œ `rightDepth` è¿”å›çš„æ˜¯é«˜åº¦ï¼ˆå±‚æ•°ï¼‰ï¼Œé‚£ä¹ˆç»è¿‡å½“å‰èŠ‚ç‚¹çš„è·¯å¾„è¾¹æ•°åˆšå¥½æ˜¯ `leftDepth + rightDepth` (å‡è®¾ç©ºèŠ‚ç‚¹æ·±åº¦ä¸º0)ã€‚

---

## 3. ä»£ç å®ç°

```javascript
/**
 * Definition for a binary tree node.
 * function TreeNode(val, left, right) {
 *     this.val = (val===undefined ? 0 : val)
 *     this.left = (left===undefined ? null : left)
 *     this.right = (right===undefined ? null : right)
 * }
 */
/**
 * @param {TreeNode} root
 * @return {number}
 */
var diameterOfBinaryTree = function(root) {
    let maxDiameter = 0;
    
    // è®¡ç®—æ ‘çš„é«˜åº¦ï¼ˆæ·±åº¦ï¼‰ï¼Œå¹¶åŒæ—¶æ›´æ–°ç›´å¾„
    const depth = (node) => {
        if (!node) return 0;
        
        const leftDepth = depth(node.left);
        const rightDepth = depth(node.right);
        
        // ç»è¿‡å½“å‰èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ = å·¦æ·±åº¦ + å³æ·±åº¦
        // æ³¨æ„ï¼šè¿™é‡Œçš„æ·±åº¦å®šä¹‰ä¸ºâ€œç»è¿‡çš„èŠ‚ç‚¹æ•°â€ï¼Œä½†è¾¹æ•° = L + R
        maxDiameter = Math.max(maxDiameter, leftDepth + rightDepth);
        
        // è¿”å›å½“å‰æ ‘çš„é«˜åº¦
        return Math.max(leftDepth, rightDepth) + 1;
    };
    
    depth(root);
    return maxDiameter;
};
```

#### ä»£ç æ‰§è¡Œæ¼”ç¤º
è¾“å…¥ `root = [1, 2, 3, 4, 5]`

1.  `depth(1)`
    *   `depth(2)`
        *   `depth(4)` -> L=0, R=0. `maxD`=0. Returns 1.
        *   `depth(5)` -> L=0, R=0. `maxD`=0. Returns 1.
        *   Back at 2: `leftDepth`=1, `rightDepth`=1.
        *   `maxDiameter` = max(0, 1+1) = 2.
        *   Returns max(1,1) + 1 = 2.
    *   `depth(3)` -> L=0, R=0. Returns 1.
    *   Back at 1: `leftDepth`=2, `rightDepth`=1.
    *   `maxDiameter` = max(2, 2+1) = 3.
    *   Returns 3.

Result: 3.

---

## 4. å¤æ‚åº¦åˆ†æ

| ç»´åº¦ | æè¿° |
| :--- | :--- |
| **æ—¶é—´å¤æ‚åº¦** | $O(n)$ã€‚æ¯ä¸ªèŠ‚ç‚¹è®¿é—®ä¸€æ¬¡ã€‚ |
| **ç©ºé—´å¤æ‚åº¦** | $O(h)$ã€‚é€’å½’æ ˆæ·±åº¦ã€‚ |
